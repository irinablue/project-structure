"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkproject_structure"] = self["webpackChunkproject_structure"] || []).push([["src_components_sortable-table_index_js"],{

/***/ "./src/components/sortable-table/index.js":
/*!************************************************!*\
  !*** ./src/components/sortable-table/index.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SortableTable)\n/* harmony export */ });\n/* harmony import */ var _utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/fetch-json.js */ \"./src/utils/fetch-json.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass SortableTable {\n  constructor() {\n    let headerConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let {\n      url = '',\n      sorted = {\n        id: headerConfig.find(item => item.sortable).id,\n        order: 'asc'\n      },\n      isSortLocally = false,\n      step = 30,\n      start = 0\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _defineProperty(this, \"data\", []);\n\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"subElements\", void 0);\n\n    _defineProperty(this, \"arrowElement\", void 0);\n\n    _defineProperty(this, \"filters\", {});\n\n    _defineProperty(this, \"directions\", {\n      asc: 1,\n      desc: -1\n    });\n\n    _defineProperty(this, \"offset\", 50);\n\n    _defineProperty(this, \"loading\", false);\n\n    _defineProperty(this, \"loadOnScrollAvailable\", true);\n\n    _defineProperty(this, \"sortOnServer\", async (field, order) => {\n      this.end = this.step;\n      const data = await this.loadData(field, order, this.start, this.step);\n      this.update(data, false);\n    });\n\n    _defineProperty(this, \"render\", async () => {\n      const {\n        id,\n        order\n      } = this.sorted;\n      const element = document.createElement('div');\n      element.innerHTML = this.template;\n      this.element = element.firstElementChild;\n      this.subElements = this.getSubElements(this.element);\n      const arrowContainer = document.createElement('div');\n      arrowContainer.innerHTML = `\n      <span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\n        <span class=\"sort-arrow\"></span>\n      </span>\n    `;\n      this.arrowElement = arrowContainer.firstElementChild;\n      const data = await this.loadData(id, order, this.start, this.end);\n      this.update(data);\n      this.addOrderToCell(id, order);\n      this.addEventListener();\n    });\n\n    _defineProperty(this, \"onSortableCellClick\", event => {\n      if (event.target.closest('[data-sortable=\"true\"]')) {\n        const field = event.target.closest('[data-sortable]').dataset.id;\n        const currentOrder = this.subElements.header.querySelector(`[data-order]`);\n        const targetOrder = currentOrder ? this.getTargetOrder(currentOrder.dataset.order) : 'asc';\n        this.sort(field, targetOrder);\n      }\n    });\n\n    _defineProperty(this, \"onWindowScroll\", async () => {\n      if (this.element) {\n        const {\n          bottom\n        } = this.element.getBoundingClientRect();\n\n        if (this.loadOnScrollAvailable && !this.isSortLocally && !this.loading && bottom < document.documentElement.clientHeight) {\n          const {\n            id,\n            order\n          } = this.sorted;\n          this.start = this.end;\n          this.end = this.start + this.step;\n          this.loading = true;\n          const data = await this.loadData(id, order, this.start, this.end);\n          this.update(data);\n          this.loading = false;\n        }\n      }\n    });\n\n    this.headerConfig = headerConfig;\n    this.url = new URL(url, \"https://course-js.javascript.ru/\");\n    this.sorted = sorted;\n    this.isSortLocally = isSortLocally;\n    this.start = start;\n    this.step = step;\n    this.end = this.start + this.step;\n    this.render();\n  }\n\n  get template() {\n    return `\n      <div data-element=\"productsContainer\" class=\"products-list__container\">\n        ${this.getTable()}\n      </div>\n    `;\n  }\n\n  async loadData(id, order, start, end) {\n    this.url.searchParams.set('_sort', id);\n    this.url.searchParams.set('_order', order);\n    this.url.searchParams.set('_start', start);\n    this.url.searchParams.set('_end', end);\n\n    for (const [key, value] of Object.entries(this.filters)) {\n      if (value || value === 0) {\n        this.url.searchParams.set(key, value.toString());\n      }\n    }\n\n    this.subElements.table.classList.add('sortable-table_loading');\n    const data = await (0,_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this.url);\n    this.subElements.table.classList.remove('sortable-table_loading');\n    this.loadOnScrollAvailable = data.length === this.step;\n    return data;\n  }\n\n  addOrderToCell(field, order) {\n    const headerCell = this.subElements.header.querySelector(`[data-id=${field}]`);\n\n    if (headerCell) {\n      headerCell.append(this.arrowElement);\n      headerCell.setAttribute('data-order', order);\n    }\n  }\n\n  sort(field, order) {\n    const orderedCell = this.subElements.header.querySelector(`[data-order]`);\n\n    if (orderedCell) {\n      orderedCell.removeAttribute('data-order');\n    }\n\n    this.addOrderToCell(field, order);\n    this.start = 0;\n    this.sorted = {\n      id: field,\n      order: order\n    };\n\n    if (this.isSortLocally) {\n      this.sortOnClient(field, order);\n    } else {\n      this.sortOnServer(field, order);\n    }\n  }\n\n  sortOnClient(field, order) {\n    const sortFieldConfig = this.headerConfig.find(item => item.id === field);\n    const sortType = sortFieldConfig ? sortFieldConfig.sortType : 'number';\n    const direction = this.directions[order];\n    const sortedData = [...this.data].sort((a, b) => {\n      switch (sortType) {\n        case 'number':\n          return direction * (a[field] - b[field]);\n\n        case 'string':\n          return direction * a[field].localeCompare(b[field], ['ru', 'en'], {\n            caseFirst: 'upper'\n          });\n      }\n    });\n    this.update(sortedData, false);\n  }\n\n  getTableHead() {\n    const headerCells = this.headerConfig.map(cell => {\n      return `\n        <div class=\"sortable-table__cell\" data-id=\"${cell.id}\" data-sortable=\"${cell.sortable}\">\n          <span>${cell.title}</span>\n        </div>\n      `;\n    });\n    return `\n      <div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\n        ${headerCells.join('')}\n      </div>\n    `;\n  }\n\n  getTableRow(item) {\n    const itemCells = this.headerConfig.map(cell => {\n      return cell.template ? cell.template(item[cell.id]) : `\n        <div class=\"sortable-table__cell\">${item[cell.id]}</div>\n      `;\n    });\n    return `\n      <a href=\"/products/${item.id}\" class=\"sortable-table__row\">\n        ${itemCells.join('')}\n      </a>\n    `;\n  }\n\n  getTableBody() {\n    return `\n      <div data-element=\"body\" class=\"sortable-table__body\">\n        ${this.getRowsHtml()}\n      </div>\n    `;\n  }\n\n  getTable() {\n    return `\n      <div data-element=\"table\" class=\"sortable-table sortable-table_loading\">\n        ${this.getTableHead()}\n        ${this.getTableBody()}\n\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\n\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\n          <div>\n            <p>No products satisfies your filter criteria</p>\n            <button type=\"button\" class=\"button-primary-outline\">Reset all filters</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  getSubElements(element) {\n    const result = {};\n    const elements = element.querySelectorAll('[data-element]');\n\n    for (const subElement of elements) {\n      const name = subElement.dataset.element;\n      result[name] = subElement;\n    }\n\n    return result;\n  }\n\n  getRowsHtml() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.data;\n    const rows = data.map(item => {\n      return this.getTableRow(item);\n    });\n    return rows.join('');\n  }\n\n  addEventListener() {\n    this.subElements.header.addEventListener('pointerdown', this.onSortableCellClick);\n    window.addEventListener('scroll', this.onWindowScroll);\n  }\n\n  update(data) {\n    let isAppend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    if (data && Object.values(data).length) {\n      this.subElements.table.classList.remove('sortable-table_empty');\n\n      if (isAppend) {\n        this.subElements.body.innerHTML += this.getRowsHtml(data);\n      } else {\n        this.subElements.body.innerHTML = this.getRowsHtml(data);\n      }\n    } else if (!isAppend) {\n      this.subElements.table.classList.add('sortable-table_empty');\n    }\n\n    this.data = data;\n  }\n\n  getTargetOrder(currentOrder) {\n    const obj = {\n      asc: 'desc',\n      desc: 'asc'\n    };\n    return obj[currentOrder];\n  }\n\n  destroy() {\n    if (this.element) {\n      this.element.remove();\n    }\n\n    window.removeEventListener('scroll', this.onWindowScroll);\n    this.element = null;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9zb3J0YWJsZS10YWJsZS9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFFQTtBQWNBO0FBU0E7QUFBQTtBQVJBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFSQTs7QUFTQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTtBQWhCQTtBQUNBO0FBRkE7O0FBaUJBOztBQUFBOztBQUFBOztBQUFBO0FBeUVBO0FBQ0E7QUFDQTtBQUNBOztBQTVFQTtBQTRLQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQWpNQTtBQXlNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFoTkE7QUFtTkE7QUFDQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFuT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUpBO0FBTUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBMEJBO0FBQ0E7QUFDQTtBQUNBOztBQWdDQTtBQUFBOztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUE1UkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LXN0cnVjdHVyZS8uL3NyYy9jb21wb25lbnRzL3NvcnRhYmxlLXRhYmxlL2luZGV4LmpzP2U5NDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZldGNoSnNvbiBmcm9tICcuLi8uLi91dGlscy9mZXRjaC1qc29uLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ydGFibGVUYWJsZSB7XG4gIGRhdGEgPSBbXTtcbiAgZWxlbWVudDtcbiAgc3ViRWxlbWVudHM7XG4gIGFycm93RWxlbWVudDtcbiAgZmlsdGVycyA9IHt9O1xuICBkaXJlY3Rpb25zID0ge1xuICAgIGFzYzogMSxcbiAgICBkZXNjOiAtMVxuICB9O1xuICBvZmZzZXQgPSA1MDtcbiAgbG9hZGluZyA9IGZhbHNlO1xuICBsb2FkT25TY3JvbGxBdmFpbGFibGUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGhlYWRlckNvbmZpZyA9IFtdLCB7XG4gICAgdXJsID0gJycsXG4gICAgc29ydGVkID0ge1xuICAgICAgaWQ6IGhlYWRlckNvbmZpZy5maW5kKGl0ZW0gPT4gaXRlbS5zb3J0YWJsZSkuaWQsXG4gICAgICBvcmRlcjogJ2FzYydcbiAgICB9LFxuICAgIGlzU29ydExvY2FsbHkgPSBmYWxzZSxcbiAgICBzdGVwID0gMzAsXG4gICAgc3RhcnQgPSAwXG4gIH0gPSB7fSkge1xuICAgIHRoaXMuaGVhZGVyQ29uZmlnID0gaGVhZGVyQ29uZmlnO1xuICAgIHRoaXMudXJsID0gbmV3IFVSTCh1cmwsIHByb2Nlc3MuZW52LkJBQ0tFTkRfVVJMKTtcbiAgICB0aGlzLnNvcnRlZCA9IHNvcnRlZDtcbiAgICB0aGlzLmlzU29ydExvY2FsbHkgPSBpc1NvcnRMb2NhbGx5O1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLnN0ZXAgPSBzdGVwO1xuICAgIHRoaXMuZW5kID0gdGhpcy5zdGFydCArIHRoaXMuc3RlcDtcblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBnZXQgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgZGF0YS1lbGVtZW50PVwicHJvZHVjdHNDb250YWluZXJcIiBjbGFzcz1cInByb2R1Y3RzLWxpc3RfX2NvbnRhaW5lclwiPlxuICAgICAgICAke3RoaXMuZ2V0VGFibGUoKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBhc3luYyBsb2FkRGF0YShpZCwgb3JkZXIsIHN0YXJ0LCBlbmQpIHtcbiAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuc2V0KCdfc29ydCcsIGlkKTtcbiAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuc2V0KCdfb3JkZXInLCBvcmRlcik7XG4gICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLnNldCgnX3N0YXJ0Jywgc3RhcnQpO1xuICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19lbmQnLCBlbmQpO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5maWx0ZXJzKSkge1xuICAgICAgaWYgKHZhbHVlIHx8IHZhbHVlID09PSAwKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN1YkVsZW1lbnRzLnRhYmxlLmNsYXNzTGlzdC5hZGQoJ3NvcnRhYmxlLXRhYmxlX2xvYWRpbmcnKTtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaEpzb24odGhpcy51cmwpO1xuXG4gICAgdGhpcy5zdWJFbGVtZW50cy50YWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdzb3J0YWJsZS10YWJsZV9sb2FkaW5nJyk7XG5cbiAgICB0aGlzLmxvYWRPblNjcm9sbEF2YWlsYWJsZSA9IGRhdGEubGVuZ3RoID09PSB0aGlzLnN0ZXA7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGFkZE9yZGVyVG9DZWxsKGZpZWxkLCBvcmRlcikge1xuICAgIGNvbnN0IGhlYWRlckNlbGwgPSB0aGlzLnN1YkVsZW1lbnRzLmhlYWRlci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD0ke2ZpZWxkfV1gKTtcbiAgICBpZiAoaGVhZGVyQ2VsbCkge1xuICAgICAgaGVhZGVyQ2VsbC5hcHBlbmQodGhpcy5hcnJvd0VsZW1lbnQpO1xuICAgICAgaGVhZGVyQ2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtb3JkZXInLCBvcmRlcik7XG4gICAgfVxuICB9XG5cbiAgc29ydChmaWVsZCwgb3JkZXIpIHtcbiAgICBjb25zdCBvcmRlcmVkQ2VsbCA9IHRoaXMuc3ViRWxlbWVudHMuaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLW9yZGVyXWApO1xuICAgIGlmIChvcmRlcmVkQ2VsbCkge1xuICAgICAgb3JkZXJlZENlbGwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW9yZGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRPcmRlclRvQ2VsbChmaWVsZCwgb3JkZXIpO1xuXG4gICAgdGhpcy5zdGFydCA9IDA7XG4gICAgdGhpcy5zb3J0ZWQgPSB7XG4gICAgICBpZDogZmllbGQsXG4gICAgICBvcmRlcjogb3JkZXJcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuaXNTb3J0TG9jYWxseSkge1xuICAgICAgdGhpcy5zb3J0T25DbGllbnQoZmllbGQsIG9yZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zb3J0T25TZXJ2ZXIoZmllbGQsIG9yZGVyKTtcbiAgICB9XG4gIH1cblxuICBzb3J0T25TZXJ2ZXIgPSBhc3luYyAoZmllbGQsIG9yZGVyKSA9PiB7XG4gICAgdGhpcy5lbmQgPSB0aGlzLnN0ZXA7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoZmllbGQsIG9yZGVyLCB0aGlzLnN0YXJ0LCB0aGlzLnN0ZXApO1xuICAgIHRoaXMudXBkYXRlKGRhdGEsIGZhbHNlKTtcbiAgfVxuXG4gIHNvcnRPbkNsaWVudChmaWVsZCwgb3JkZXIpIHtcbiAgICBjb25zdCBzb3J0RmllbGRDb25maWcgPSB0aGlzLmhlYWRlckNvbmZpZy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gZmllbGQpO1xuICAgIGNvbnN0IHNvcnRUeXBlID0gc29ydEZpZWxkQ29uZmlnID8gc29ydEZpZWxkQ29uZmlnLnNvcnRUeXBlIDogJ251bWJlcic7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb25zW29yZGVyXTtcblxuICAgIGNvbnN0IHNvcnRlZERhdGEgPSBbLi4udGhpcy5kYXRhXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBzd2l0Y2ggKHNvcnRUeXBlKSB7XG4gICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiAqIChhW2ZpZWxkXSAtIGJbZmllbGRdKTtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uICogYVtmaWVsZF0ubG9jYWxlQ29tcGFyZShiW2ZpZWxkXSwgWydydScsICdlbiddLCB7Y2FzZUZpcnN0OiAndXBwZXInfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZShzb3J0ZWREYXRhLCBmYWxzZSk7XG4gIH1cblxuICBnZXRUYWJsZUhlYWQoKSB7XG4gICAgY29uc3QgaGVhZGVyQ2VsbHMgPSB0aGlzLmhlYWRlckNvbmZpZy5tYXAoY2VsbCA9PiB7XG4gICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwic29ydGFibGUtdGFibGVfX2NlbGxcIiBkYXRhLWlkPVwiJHtjZWxsLmlkfVwiIGRhdGEtc29ydGFibGU9XCIke2NlbGwuc29ydGFibGV9XCI+XG4gICAgICAgICAgPHNwYW4+JHtjZWxsLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgZGF0YS1lbGVtZW50PVwiaGVhZGVyXCIgY2xhc3M9XCJzb3J0YWJsZS10YWJsZV9faGVhZGVyIHNvcnRhYmxlLXRhYmxlX19yb3dcIj5cbiAgICAgICAgJHtoZWFkZXJDZWxscy5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBnZXRUYWJsZVJvdyhpdGVtKSB7XG4gICAgY29uc3QgaXRlbUNlbGxzID0gdGhpcy5oZWFkZXJDb25maWcubWFwKGNlbGwgPT4ge1xuICAgICAgcmV0dXJuIGNlbGwudGVtcGxhdGUgPyBjZWxsLnRlbXBsYXRlKGl0ZW1bY2VsbC5pZF0pIDogYFxuICAgICAgICA8ZGl2IGNsYXNzPVwic29ydGFibGUtdGFibGVfX2NlbGxcIj4ke2l0ZW1bY2VsbC5pZF19PC9kaXY+XG4gICAgICBgO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGBcbiAgICAgIDxhIGhyZWY9XCIvcHJvZHVjdHMvJHtpdGVtLmlkfVwiIGNsYXNzPVwic29ydGFibGUtdGFibGVfX3Jvd1wiPlxuICAgICAgICAke2l0ZW1DZWxscy5qb2luKCcnKX1cbiAgICAgIDwvYT5cbiAgICBgO1xuICB9XG5cbiAgZ2V0VGFibGVCb2R5KCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGRhdGEtZWxlbWVudD1cImJvZHlcIiBjbGFzcz1cInNvcnRhYmxlLXRhYmxlX19ib2R5XCI+XG4gICAgICAgICR7dGhpcy5nZXRSb3dzSHRtbCgpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIGdldFRhYmxlKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGRhdGEtZWxlbWVudD1cInRhYmxlXCIgY2xhc3M9XCJzb3J0YWJsZS10YWJsZSBzb3J0YWJsZS10YWJsZV9sb2FkaW5nXCI+XG4gICAgICAgICR7dGhpcy5nZXRUYWJsZUhlYWQoKX1cbiAgICAgICAgJHt0aGlzLmdldFRhYmxlQm9keSgpfVxuXG4gICAgICAgIDxkaXYgZGF0YS1lbGVtZW50PVwibG9hZGluZ1wiIGNsYXNzPVwibG9hZGluZy1saW5lIHNvcnRhYmxlLXRhYmxlX19sb2FkaW5nLWxpbmVcIj48L2Rpdj5cblxuICAgICAgICA8ZGl2IGRhdGEtZWxlbWVudD1cImVtcHR5UGxhY2Vob2xkZXJcIiBjbGFzcz1cInNvcnRhYmxlLXRhYmxlX19lbXB0eS1wbGFjZWhvbGRlclwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8cD5ObyBwcm9kdWN0cyBzYXRpc2ZpZXMgeW91ciBmaWx0ZXIgY3JpdGVyaWE8L3A+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbi1wcmltYXJ5LW91dGxpbmVcIj5SZXNldCBhbGwgZmlsdGVyczwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBnZXRTdWJFbGVtZW50cyhlbGVtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3QgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVsZW1lbnRdJyk7XG5cbiAgICBmb3IgKGNvbnN0IHN1YkVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBzdWJFbGVtZW50LmRhdGFzZXQuZWxlbWVudDtcblxuICAgICAgcmVzdWx0W25hbWVdID0gc3ViRWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0Um93c0h0bWwoZGF0YSA9IHRoaXMuZGF0YSkge1xuICAgIGNvbnN0IHJvd3MgPSBkYXRhLm1hcChpdGVtID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFRhYmxlUm93KGl0ZW0pO1xuICAgIH0pO1xuICAgIHJldHVybiByb3dzLmpvaW4oJycpO1xuICB9XG5cbiAgcmVuZGVyID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHtpZCwgb3JkZXJ9ID0gdGhpcy5zb3J0ZWQ7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB0aGlzLnN1YkVsZW1lbnRzID0gdGhpcy5nZXRTdWJFbGVtZW50cyh0aGlzLmVsZW1lbnQpO1xuXG4gICAgY29uc3QgYXJyb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhcnJvd0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8c3BhbiBkYXRhLWVsZW1lbnQ9XCJhcnJvd1wiIGNsYXNzPVwic29ydGFibGUtdGFibGVfX3NvcnQtYXJyb3dcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0LWFycm93XCI+PC9zcGFuPlxuICAgICAgPC9zcGFuPlxuICAgIGA7XG4gICAgdGhpcy5hcnJvd0VsZW1lbnQgPSBhcnJvd0NvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKGlkLCBvcmRlciwgdGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXG4gICAgdGhpcy51cGRhdGUoZGF0YSk7XG4gICAgdGhpcy5hZGRPcmRlclRvQ2VsbChpZCwgb3JkZXIpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLnN1YkVsZW1lbnRzLmhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIHRoaXMub25Tb3J0YWJsZUNlbGxDbGljayk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25XaW5kb3dTY3JvbGwpO1xuICB9XG5cbiAgb25Tb3J0YWJsZUNlbGxDbGljayA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtc29ydGFibGU9XCJ0cnVlXCJdJykpIHtcbiAgICAgIGNvbnN0IGZpZWxkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXNvcnRhYmxlXScpLmRhdGFzZXQuaWQ7XG4gICAgICBjb25zdCBjdXJyZW50T3JkZXIgPSB0aGlzLnN1YkVsZW1lbnRzLmhlYWRlci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1vcmRlcl1gKTtcbiAgICAgIGNvbnN0IHRhcmdldE9yZGVyID0gY3VycmVudE9yZGVyID8gdGhpcy5nZXRUYXJnZXRPcmRlcihjdXJyZW50T3JkZXIuZGF0YXNldC5vcmRlcikgOiAnYXNjJztcblxuICAgICAgdGhpcy5zb3J0KGZpZWxkLCB0YXJnZXRPcmRlcik7XG4gICAgfVxuICB9XG5cbiAgb25XaW5kb3dTY3JvbGwgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgY29uc3QgeyBib3R0b20gfSA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgaWYgKHRoaXMubG9hZE9uU2Nyb2xsQXZhaWxhYmxlICYmICF0aGlzLmlzU29ydExvY2FsbHkgJiYgIXRoaXMubG9hZGluZyAmJiBib3R0b20gPCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIG9yZGVyIH0gPSB0aGlzLnNvcnRlZDtcblxuICAgICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5lbmQ7XG4gICAgICAgIHRoaXMuZW5kID0gdGhpcy5zdGFydCArIHRoaXMuc3RlcDtcblxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKGlkLCBvcmRlciwgdGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuICAgICAgICB0aGlzLnVwZGF0ZShkYXRhKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGUoZGF0YSwgaXNBcHBlbmQgPSB0cnVlKSB7XG4gICAgaWYgKGRhdGEgJiYgT2JqZWN0LnZhbHVlcyhkYXRhKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc3ViRWxlbWVudHMudGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnc29ydGFibGUtdGFibGVfZW1wdHknKTtcblxuICAgICAgaWYgKGlzQXBwZW5kKSB7XG4gICAgICAgIHRoaXMuc3ViRWxlbWVudHMuYm9keS5pbm5lckhUTUwgKz0gdGhpcy5nZXRSb3dzSHRtbChkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3ViRWxlbWVudHMuYm9keS5pbm5lckhUTUwgPSB0aGlzLmdldFJvd3NIdG1sKGRhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzQXBwZW5kKSB7XG4gICAgICB0aGlzLnN1YkVsZW1lbnRzLnRhYmxlLmNsYXNzTGlzdC5hZGQoJ3NvcnRhYmxlLXRhYmxlX2VtcHR5Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIGdldFRhcmdldE9yZGVyKGN1cnJlbnRPcmRlcikge1xuICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgIGFzYzogJ2Rlc2MnLFxuICAgICAgZGVzYzogJ2FzYydcbiAgICB9O1xuXG4gICAgcmV0dXJuIG9ialtjdXJyZW50T3JkZXJdO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uV2luZG93U2Nyb2xsKTtcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/sortable-table/index.js\n");

/***/ }),

/***/ "./src/utils/fetch-json.js":
/*!*********************************!*\
  !*** ./src/utils/fetch-json.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"FetchError\": () => (/* binding */ FetchError)\n/* harmony export */ });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// same as fetch, but throws FetchError in case of errors\n// status >= 400 is an error\n// network error / json error are errors\n/* harmony default export */ async function __WEBPACK_DEFAULT_EXPORT__(url, params) {\n  let response;\n\n  try {\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\n    response = await fetch(url.toString(), params);\n  } catch (err) {\n    throw new FetchError(response, \"Network error has occurred.\");\n  }\n\n  let body;\n\n  if (!response.ok) {\n    let errorText = response.statusText; // Not Found (for 404)\n\n    try {\n      body = await response.json();\n      errorText = body.error && body.error.message || body.data && body.data.error && body.data.error.message || errorText;\n    } catch (error) {\n      /* ignore failed body */\n    }\n\n    let message = `Error ${response.status}: ${errorText}`;\n    throw new FetchError(response, body, message);\n  }\n\n  try {\n    return await response.json();\n  } catch (err) {\n    throw new FetchError(response, null, err.message);\n  }\n}\nclass FetchError extends Error {\n  constructor(response, body, message) {\n    super(message);\n\n    _defineProperty(this, \"name\", \"FetchError\");\n\n    this.response = response;\n    this.body = body;\n  }\n\n} // handle uncaught failed fetch through\n\nwindow.addEventListener('unhandledrejection', event => {\n  if (event.reason instanceof FetchError) {\n    alert(event.reason.message);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZmV0Y2gtanNvbi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7O0FBRUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTs7QUFEQTs7QUFFQTtBQUNBO0FBQ0E7O0FBUEE7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3Qtc3RydWN0dXJlLy4vc3JjL3V0aWxzL2ZldGNoLWpzb24uanM/M2I1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzYW1lIGFzIGZldGNoLCBidXQgdGhyb3dzIEZldGNoRXJyb3IgaW4gY2FzZSBvZiBlcnJvcnNcbi8vIHN0YXR1cyA+PSA0MDAgaXMgYW4gZXJyb3Jcbi8vIG5ldHdvcmsgZXJyb3IgLyBqc29uIGVycm9yIGFyZSBlcnJvcnNcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24odXJsLCBwYXJhbXMpIHtcbiAgbGV0IHJlc3BvbnNlO1xuXG4gIHRyeSB7XG4gICAgLy8gTk9URTogXCJ0b1N0cmluZ1wiIGNhbGwgbmVlZGVkIGZvciBjb3JyZWN0IHdvcmsgb2YgXCJqZXN0LWZldGNoLW1vY2tcIlxuICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHBhcmFtcyk7XG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgdGhyb3cgbmV3IEZldGNoRXJyb3IocmVzcG9uc2UsIFwiTmV0d29yayBlcnJvciBoYXMgb2NjdXJyZWQuXCIpO1xuICB9XG5cbiAgbGV0IGJvZHk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGxldCBlcnJvclRleHQgPSByZXNwb25zZS5zdGF0dXNUZXh0OyAvLyBOb3QgRm91bmQgKGZvciA0MDQpXG5cbiAgICB0cnkge1xuICAgICAgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXJyb3JUZXh0ID0gKGJvZHkuZXJyb3IgJiYgYm9keS5lcnJvci5tZXNzYWdlKSB8fCAoYm9keS5kYXRhICYmIGJvZHkuZGF0YS5lcnJvciAmJiBib2R5LmRhdGEuZXJyb3IubWVzc2FnZSkgfHwgZXJyb3JUZXh0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIGlnbm9yZSBmYWlsZWQgYm9keSAqLyB9XG5cbiAgICBsZXQgbWVzc2FnZSA9IGBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306ICR7ZXJyb3JUZXh0fWA7XG5cbiAgICB0aHJvdyBuZXcgRmV0Y2hFcnJvcihyZXNwb25zZSwgYm9keSwgbWVzc2FnZSk7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgdGhyb3cgbmV3IEZldGNoRXJyb3IocmVzcG9uc2UsIG51bGwsIGVyci5tZXNzYWdlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmV0Y2hFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9IFwiRmV0Y2hFcnJvclwiO1xuXG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlLCBib2R5LCBtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gIH1cbn1cblxuLy8gaGFuZGxlIHVuY2F1Z2h0IGZhaWxlZCBmZXRjaCB0aHJvdWdoXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgZXZlbnQgPT4ge1xuICBpZiAoZXZlbnQucmVhc29uIGluc3RhbmNlb2YgRmV0Y2hFcnJvcikge1xuICAgIGFsZXJ0KGV2ZW50LnJlYXNvbi5tZXNzYWdlKTtcbiAgfVxufSk7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/fetch-json.js\n");

/***/ })

}]);